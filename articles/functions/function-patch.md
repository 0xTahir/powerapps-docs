<properties
	pageTitle="PowerApps: Patch function"
	description="Reference information for the Patch function in PowerApps, including syntax and examples"
	services="powerapps"
	documentationCenter="na"
	authors="gregli-msft"
	manager="bills"
	editor=""
	tags=""/>

<tags
   ms.service="powerapps"
   ms.devlang="na"
   ms.topic="article"
   ms.tgt_pltfrm="na"
   ms.workload="na"
   ms.date="10/21/2015"
   ms.author="gregli"/>

# Patch function in PowerApps #

The **Patch** function modifies the contents of a [Record](file-name.md).  You can also use it to merge one or more Records.

## Description ##

In its simplest form, Patch takes two parameters – an original record and a change record.  Columns are compared individually between the two records.  Columns that only appear in one of the records are passed through to the result of the function unmodified.  For columns that appear in both records, the value in the change record is passed to the result, overriding the original record’s value.  Multiple change records can be provided; records further along the parameter list (read left to right) override values from earlier change records.

When used with a Data Source, the original record is found within the data source and modified.  Read the article on Working with Data Sources for design patterns that utilize Patch effectively.

If the original record does not specify one or more Primary Keys, then a new record is created within the data source with its column values taken from the original and change records.  The Defaults Function returns a record without primary keys that can be useful for this purpose.  Some Data Sources will automatically generate a Primary Key when a record is created, in which case the value of the Primary Key will be available in the return value from Patch.

Patch returns the modified record.  When used with a data source, the function will return Blank if a primary key column is not provided and the column is not generated by the data source.  A data source may run into problems when performing a Patch, including conflict, validation, and permission errors.  The return value from Patch can be passed to the Errors Function to return detailed error information for the operation, even if the return value is Blank.

## Syntax ##

**Patch**(*OriginalRecord*, *ChangeRecord*, … )

**Patch**(*DataSource*, *OriginalRecord*, *ChangeRecord*, … )
 - Data Source – Optional. The Data Source in which to find Original Record.

- Original Record – Required. The Record to be modified.

- Change Record – Required.  One or more Change Records to apply to Original Record. Columns in records further along the parameter list take priority over earlier records.

## Examples ##

#### Used without a Data Source ####
| Formula                                 | Description                                                                                                                                           | Result              |
|-----------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------|
| Patch( { a: 1, b: 2 }, { a: 3, c: 4 } ) | Modifies the record {a: 1, b: 2} with changes from the record {a: 3, c: 4}.  Columns are merged, with conflicting columns favoring the change record. | { a: 3, b:2, c: 4 } |
|                                         |                                                                                                                                                       |                     |
| Patch( { a: 1, b: 2 }, {a: 3}, {a: 5} ) | Multiple change records are applied, with later change records (read left to right) on the parameter list overriding earlier change records.          | { a: 5, b: 2 }      |

### Used with a Data Source (Primary Key Auto Generated)

#### IceCreams Data Source ####

| Flavor | Quantity | ID (Primary Key, auto generated by data source) |
|--------------|-----------------|------------------------------------------------|
| Chocolate | 100 | 1 |
| Vanilla | 200 | 2 |

| Formula                                 | Description                                                                                                                                           | Result              |
|--------------|-----------------------------------|---------------------|
| Patch(&nbsp;IceCreams, {&nbsp;ID:&nbsp;1&nbsp;}, {&nbsp;Quantity:&nbsp;400&nbsp;} ) | Locates Chocolate’s record in the IceCreams Data Source (by Primary Key) and modifies the Quantity to 400. | {&nbsp;ID: 1, Quantity: 400 } <br><br>Errors( IceCreams, {&nbsp;ID:&nbsp;1,&nbsp;Quantity:&nbsp;400&nbsp;} ) returns Blank |
| Patch( IceCreams, {}, {&nbsp;Flavor:&nbsp;“Strawberry”&nbsp;} ) | Since ID is not supplied, creates a new record in the IceCreams Data Source.  A new primary key of ID=3 is automatically generated by the DataSource.  The Quantity column is left Blank. | { ID: 3, Flavor: “Strawberry” } <br><br> Errors( IceCreams, { ID: 3, Flavor: “Strawberry” } ) returns Blank |

### Used with a Data Source (Primary Key not Auto Generated)

#### Scores Data Source ####

| Name (Primary Key) | Score |
|--------------|-----------------|
| Fred | 100 |
| Jane | 120 |

| Formula                                 | Description                                                                                                                                           | Result              |
|-----------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------|
| Patch( Scores, { Name: “Fred” }, { Score: 30 } ) | Locates Fred’s record in the Scores Data Source and modifies the Score to 30.  | { ID: 1, Quantity: 400 } <br><br>Errors( IceCreams, { ID: 1, Quantity: 400 } ) returns Blank |
| Patch( Scores, {}, { Name: “”, Score: 50 } ) | Since ID is not supplied, creates a new record in the IceCreams Data Source.  A new primary key of ID=3 is automatically generated by the DataSource.  The Quantity column is left Blank. | { ID: 3, Flavor: “Strawberry” } <br><br> Errors( IceCreams, { ID: 3, Flavor: “Strawberry” } ) returns Blank |


